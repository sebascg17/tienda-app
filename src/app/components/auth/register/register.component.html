<div class="register-container" [ngClass]="'role-' + registerRole.toLowerCase()">
  <div class="register-card space-y-8" [ngClass]="'role-' + registerRole.toLowerCase()">
    <div>
      <div class="flex justify-center">
        <div class="w-16 h-16 bg-[#08d15f] rounded-full flex items-center justify-center">
          <i class="pi pi-user-plus text-white text-3xl"></i>
        </div>
      </div>
      <h2 class="mt-6 text-center text-3xl font-extrabold text-gray-100 dark:text-white">
        Crear Cuenta
      </h2>
      <p class="mt-2 text-center text-sm text-gray-200 dark:text-gray-400">
        Únete a <span class="text-[#08d15f] font-bold">SBENIX</span> hoy mismo
      </p>
    </div>

    <form class="mt-8 space-y-6" [formGroup]="registerForm" (ngSubmit)="register()">

      <div *ngIf="errorMsg" [ngClass]="{
          'bg-red-50 text-red-700 border-red-500': errorType === 'error',
          'bg-yellow-50 text-yellow-700 border-yellow-500': errorType === 'warning'
        }" class="p-3 rounded-md text-sm border-l-4">
        {{ errorMsg }}
      </div>

      <div class="rounded-md shadow-sm space-y-4">

        <!-- Nombre -->
        <div>
          <label for="nombre" class="auth-label block text-sm font-medium mb-2"
            [ngClass]="'role-' + registerRole.toLowerCase()">Nombre Completo</label>
          <input id="nombre" formControlName="nombre" type="text"
            class="auth-input appearance-none rounded-lg relative block w-full px-4 py-3 border-0 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#08d15f] focus:bg-white dark:focus:bg-gray-600 sm:text-sm transition-all"
            [ngClass]="'role-' + registerRole.toLowerCase()" placeholder="Tu nombre completo">
          <div *ngIf="f['nombre'].touched && f['nombre'].invalid" class="text-xs text-red-500 mt-1">
            El nombre es requerido.
          </div>
        </div>

        <!-- Email -->
        <div>
          <label for="email" class="auth-label block text-sm font-medium mb-2"
            [ngClass]="'role-' + registerRole.toLowerCase()">Correo Electrónico</label>
          <input id="email" formControlName="email" type="email" autocomplete="email"
            class="auth-input appearance-none rounded-lg relative block w-full px-4 py-3 border-0 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#08d15f] focus:bg-white dark:focus:bg-gray-600 sm:text-sm transition-all"
            [ngClass]="'role-' + registerRole.toLowerCase()" placeholder="ejemplo@correo.com">
          <div *ngIf="f['email'].touched && f['email'].errors?.['email']" class="text-xs text-red-500 mt-1">
            Correo inválido.
          </div>
        </div>



        <!-- Fecha de Nacimiento -->
        <div>
          <label for="fechaNacimiento" class="auth-label block text-sm font-medium mb-2"
            [ngClass]="'role-' + registerRole.toLowerCase()">Fecha de Nacimiento</label>
          <input id="fechaNacimiento" formControlName="fechaNacimiento" type="date"
            class="auth-input appearance-none rounded-lg relative block w-full px-4 py-3 border-0 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#08d15f] focus:bg-white dark:focus:bg-gray-600 sm:text-sm transition-all"
            [ngClass]="'role-' + registerRole.toLowerCase()">
        </div>

        <!-- País (Común) -->
        <div>
          <label for="pais" class="auth-label block text-sm font-medium mb-2"
            [ngClass]="'role-' + registerRole.toLowerCase()">País</label>
          <select id="pais" formControlName="pais" (change)="onPaisChange($event)"
            class="auth-input appearance-none rounded-lg relative block w-full px-4 py-3 border-0 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#08d15f] focus:bg-white dark:focus:bg-gray-600 sm:text-sm transition-all text-gray-700 dark:text-gray-200"
            [ngClass]="'role-' + registerRole.toLowerCase()">
            <option value="" disabled selected>Selecciona un país</option>
            <option *ngFor="let p of paises" [value]="p.nombre">{{ p.nombre }}</option>
          </select>
        </div>

        <!-- Departamento (Movido a común para simplificar cascada global, o condicional si así se prefiere) -->
        <!-- NOTA: El departamento estaba dentro de 'isTendero' pero la lógica de cascada normal suele incluirlo siempre.
             Tu requerimiento anterior lo ponía en Tendero. Para la cascada funcione bien con Ciudad, debe estar disponible si se selecciona País.
             Lo moveré aquí como parte del bloque común si queremos que CIUDAD dependa de DEPTO. 
             Si Ciudad es libre, ok. Pero "Cascada" implica Pais -> Depto -> Ciudad.
             Voy a asumir que para el registro ahora, estos campos son comunes o al menos visibles.
        -->
        <div>
          <label for="departamento" class="auth-label block text-sm font-medium mb-2"
            [ngClass]="'role-' + registerRole.toLowerCase()">Departamento/Estado</label>
          <select id="departamento" formControlName="departamento" (change)="onDepartamentoChange($event)"
            class="auth-input appearance-none rounded-lg relative block w-full px-4 py-3 border-0 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#08d15f] focus:bg-white dark:focus:bg-gray-600 sm:text-sm transition-all text-gray-700 dark:text-gray-200"
            [ngClass]="'role-' + registerRole.toLowerCase()">
            <option value="" disabled selected>Selecciona un departamento</option>
            <option *ngFor="let d of departamentos" [value]="d.nombre">{{ d.nombre }}</option>
          </select>
        </div>

        <!-- Ciudad (Común) -->
        <div>
          <label for="ciudad" class="auth-label block text-sm font-medium mb-2"
            [ngClass]="'role-' + registerRole.toLowerCase()">Ciudad</label>
          <select id="ciudad" formControlName="ciudad"
            class="auth-input appearance-none rounded-lg relative block w-full px-4 py-3 border-0 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#08d15f] focus:bg-white dark:focus:bg-gray-600 sm:text-sm transition-all text-gray-700 dark:text-gray-200"
            [ngClass]="'role-' + registerRole.toLowerCase()">
            <option value="" disabled selected>Selecciona una ciudad</option>
            <option *ngFor="let m of municipios" [value]="m.nombre">{{ m.nombre }}</option>
          </select>
        </div>

        <!-- Teléfono (Movido aquí por preferencia de UX) -->
        <div>
          <label for="telefono" class="auth-label block text-sm font-medium mb-2"
            [ngClass]="'role-' + registerRole.toLowerCase()">Teléfono</label>
          <div class="flex gap-2">
            <select formControlName="codigoPais"
              class="auth-input appearance-none rounded-lg block w-1/3 px-4 py-3 border-0 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#08d15f] focus:bg-white dark:focus:bg-gray-600 sm:text-sm transition-all text-gray-700 dark:text-gray-200"
              [ngClass]="'role-' + registerRole.toLowerCase()">
              <option *ngFor="let p of paises" [value]="p.codigo">{{ p.codigo }} ({{ p.nombre }})</option>
            </select>
            <input id="telefono" formControlName="telefono" type="tel"
              class="auth-input appearance-none rounded-lg relative block w-2/3 px-4 py-3 border-0 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#08d15f] focus:bg-white dark:focus:bg-gray-600 sm:text-sm transition-all"
              [ngClass]="'role-' + registerRole.toLowerCase()" placeholder="Tu número celular">
          </div>
        </div>





        <!-- Password -->
        <div class="relative">
          <label for="password" class="auth-label block text-sm font-medium mb-2"
            [ngClass]="'role-' + registerRole.toLowerCase()">Contraseña</label>
          <input id="password" formControlName="password" [type]="showPassword ? 'text' : 'password'"
            class="auth-input appearance-none rounded-lg relative block w-full px-4 py-3 border-0 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#08d15f] focus:bg-white dark:focus:bg-gray-600 sm:text-sm transition-all"
            [ngClass]="'role-' + registerRole.toLowerCase()" placeholder="Mínimo 6 caracteres">
          <button type="button" (click)="togglePassword()"
            class="absolute top-8 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600">
            <i class="pi" [ngClass]="showPassword ? 'pi-eye-slash' : 'pi-eye'"></i>
          </button>
          <div *ngIf="f['password'].touched && f['password'].errors?.['minlength']" class="text-xs text-red-500 mt-1">
            Mínimo 6 caracteres.
          </div>
        </div>

        <!-- Confirm Password -->
        <div class="relative">
          <label for="confirmPassword" class="auth-label block text-sm font-medium mb-2"
            [ngClass]="'role-' + registerRole.toLowerCase()">Confirmar Contraseña</label>
          <input id="confirmPassword" formControlName="confirmPassword"
            [type]="showConfirmPassword ? 'text' : 'password'"
            class="auth-input appearance-none rounded-lg relative block w-full px-4 py-3 border-0 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#08d15f] focus:bg-white dark:focus:bg-gray-600 sm:text-sm transition-all"
            [ngClass]="'role-' + registerRole.toLowerCase()" placeholder="Repite tu contraseña">
          <button type="button" (click)="toggleConfirmPassword()"
            class="absolute top-8 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600">
            <i class="pi" [ngClass]="showConfirmPassword ? 'pi-eye-slash' : 'pi-eye'"></i>
          </button>
        </div>

        <!-- Mismatch Error -->
        <div *ngIf="registerForm.hasError('mismatch') && f['confirmPassword'].touched"
          class="text-sm text-red-600 animate-pulse flex items-center gap-1">
          <i class="pi pi-exclamation-circle"></i> Las contraseñas no coinciden.
        </div>
      </div>

      <div>
        <button type="submit" [disabled]="registerForm.invalid"
          class="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-[#08d15f] hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#08d15f] transition-colors shadow-md disabled:opacity-50 disabled:cursor-not-allowed">
          Crear Cuenta
        </button>
      </div>

      <div class="text-center text-sm">
        <a [routerLink]="loginLink" class="font-medium text-[#08d15f] hover:text-green-500">
          ¿Ya tienes cuenta? Inicia sesión
        </a>
      </div>
    </form>
  </div>
</div>
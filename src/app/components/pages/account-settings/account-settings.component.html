<div class="max-w-3xl mx-auto">
  <!-- Encabezado -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">
      {{ 'profile.accountSettings' | translate }}
    </h1>
    <p class="text-gray-600 dark:text-gray-400">
      Gestiona tu información de contacto y ubicación
    </p>
  </div>



  <!-- Tabs -->
  <div class="mb-6 border-b border-gray-200 dark:border-gray-700">
    <div class="flex gap-0">
      <button (click)="switchTab('contact')"
        [ngClass]="{'border-b-2 border-[#08d15f] text-[#08d15f]': activeTab === 'contact', 'text-gray-600 dark:text-gray-400': activeTab !== 'contact'}"
        class="px-4 py-3 font-medium transition-colors border-b-2 border-transparent hover:text-gray-900 dark:hover:text-white">
        <i class="pi pi-phone mr-2"></i>
        {{ 'profile.contact' | translate }}
      </button>
      <button (click)="switchTab('location')"
        [ngClass]="{'border-b-2 border-[#08d15f] text-[#08d15f]': activeTab === 'location', 'text-gray-600 dark:text-gray-400': activeTab !== 'location'}"
        class="px-4 py-3 font-medium transition-colors border-b-2 border-transparent hover:text-gray-900 dark:hover:text-white">
        <i class="pi pi-map-marker mr-2"></i>
        {{ 'profile.location' | translate }}
      </button>
    </div>
  </div>

  <!-- Contenido de Contacto -->
  <div *ngIf="activeTab === 'contact'" class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 animate-fade-in">
    <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
      {{ 'profile.contact' | translate }}
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
      <!-- Código de País -->
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
          {{ 'profile.countryCode' | translate }}
        </label>
        <input type="text" [(ngModel)]="countryCode" placeholder="+1"
          class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#08d15f] focus:border-transparent transition">
      </div>

      <!-- Teléfono -->
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
          {{ 'profile.phone' | translate }}
        </label>
        <input type="tel" [(ngModel)]="phoneNumber" placeholder="3001234567"
          [ngClass]="{'border-red-500 ring-red-200': phoneNumber && phoneNumber.length < 7 && isSavingAttempted}"
          class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#08d15f] focus:border-transparent transition">
      </div>
    </div>

    <!-- Botón Guardar -->
    <div class="flex justify-end">
      <button (click)="saveContactInfo()" [disabled]="isSaving"
        class="px-4 py-2 bg-[#08d15f] text-white rounded-lg hover:bg-green-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2">
        <span *ngIf="isSaving" class="inline-block animate-spin">⟳</span>
        {{ isSaving ? 'Guardando...' : ('profile.save' | translate) }}
      </button>
    </div>
  </div>

  <!-- Contenido de Ubicación -->
  <div *ngIf="activeTab === 'location'" class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 animate-fade-in">
    <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
      {{ 'profile.location' | translate }}
    </h2>

    <div class="grid grid-cols-1 gap-4 mb-6">
      <!-- País -->
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
          {{ 'profile.country' | translate }}
        </label>
        <select [(ngModel)]="selectedCountry" (change)="onCountryChange()"
          class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#08d15f] focus:border-transparent transition">
          <option value="" disabled selected>{{ 'profile.country' | translate }}</option>
          <option *ngFor="let country of countries" [value]="country.id">
            {{ country.nombre }}
          </option>
        </select>
        <p *ngIf="!selectedCountry && isSavingAttempted" class="text-xs text-red-500 mt-1">Este campo es obligatorio</p>
      </div>

      <!-- Departamento/Estado -->
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
          {{ 'profile.state' | translate }}
        </label>
        <select [(ngModel)]="selectedState" (change)="onStateChange()" [disabled]="!selectedCountry"
          class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#08d15f] focus:border-transparent transition disabled:opacity-50 disabled:cursor-not-allowed">
          <option value="" disabled selected>{{ 'profile.state' | translate }}</option>
          <option *ngFor="let state of states" [value]="state.id">
            {{ state.nombre }}
          </option>
        </select>
      </div>

      <!-- Ciudad -->
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
          {{ 'profile.city' | translate }}
        </label>
        <select [(ngModel)]="selectedCity" [disabled]="!selectedState"
          class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#08d15f] focus:border-transparent transition disabled:opacity-50 disabled:cursor-not-allowed">
          <option value="" disabled selected>{{ 'profile.city' | translate }}</option>
          <option *ngFor="let city of cities" [value]="city.id">
            {{ city.nombre }}
          </option>
        </select>
      </div>
    </div>

    <!-- Botón Guardar -->
    <div class="flex justify-end">
      <button (click)="saveLocationInfo()" [disabled]="isSaving || !selectedCountry || !selectedState || !selectedCity"
        class="px-4 py-2 bg-[#08d15f] text-white rounded-lg hover:bg-green-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2">
        <span *ngIf="isSaving" class="inline-block animate-spin">⟳</span>
        {{ isSaving ? 'Guardando...' : ('profile.save' | translate) }}
      </button>
    </div>
  </div>
</div>